<!doctype html>  
<head>  
  <meta charset="utf-8">  
  <title>Exercise 3</title>    
</head>  

<body>
    <!-- 
        1. Open this document side-by-side on browser (with js console opened) and code editor.
        2. Analyse JavaScript code below.
        3. Write your own implementation of methods:
            a. addStandardBook,
            b. addVipBook,
            c. borrowStandardBook,
            d. borrowVipBook
        Based on standard Array operations (push, pop, ...)
        4. Fill in implementation of methods:
            a. printStandards
            b. printVip 
        Based on some advanced methods like filter or your own implementation.
        5. Test it out :)
        
        Bibliography        
        https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array
        https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter 
    -->
    <h1>Stellar library</h1>
    <p>
        Standard Books: <br />
        Free: <label id="standardFreeLabel"></label> <br />
        Borrowed: <label id="standardBorrowedLabel"></label>
    </p>
    
    <p>
        VIP Books: <br />
        Free: <label id="vipFreeLabel"></label> <br />
        Borrowed: <label id="vipBorrowedLabel"></label>
    </p>
    
    <p>
        <input id="titleInput" />
    </p>
    
    <button id="addStandardBookBtn">Add Standard Book</button>
    <button id="addVipBookBtn">Add VIP Book</button>
    <button id="borrowStandardBtn">Borrow Standard Book</button>
    <button id="borrowVipBtn">Borrow VIP Book</button>
    
    <script type="text/javascript">
        
        var sampleBook = {
            title: 'Harry Potter',
            isBorrowed: false
        };
        
        var library = {
            standards: [],
            vip: []
        };
        
        
        function addStandardBook(title) {
            //!!!!!!!!!    
            if(title.length>0){   
            library.standards.push({
               title: title,
               isBorrowed: false 
            });}
        }
        
        function addVipBook(title) {
            //!!!!!!!!!
            if(title.length>0){
            library.vip.push({
               title: title,
               isBorrowed: false 
            });}
        }
        
        function borrowStandardBook(title) {
            //!!!!!!!!!
             for(i=0;i<library.standards.length;i++){
                 if(library.standards[i].isBorrowed === false
                     && library.standards[i].title === title){
                        library.standards[i].isBorrowed = true;
                        break;
                    }
             }
             
        }
        
        function borrowVipBook(title) {
            //!!!!!!!!!
            for(i=0;i<library.vip.length;i++){
                if(library.vip[i].isBorrowed === false &&
                    library.vip[i].title === title){
                        library.vip[i].isBorrowed = true;
                        break;
                    }
            }
        }
        
        
        function printStandards() {
            var free = '', borrowed = '';
            
            library.standards.filter(function(book){
               if(book.isBorrowed){
                   return false;
               }else{
                   return true;
               }
            }).forEach(function(book){
                free += book.title  + " | ";
            });
            
            library.standards.filter(function(book){
               if(book.isBorrowed){
                   return true;
               }else{
                   return false;
               }
            }).forEach(function(book){
                borrowed += book.title  + " | ";
            });
            
            document.getElementById("standardFreeLabel").innerHTML = free;
            document.getElementById("standardBorrowedLabel").innerHTML = borrowed;
        }
        
        function printVip() {
            var free = '', borrowed = '';
            
            library.vip.filter(function(book){
               if(book.isBorrowed){
                   return false;
               }else{
                   return true;
               }
            }).forEach(function(book){
                free += book.title  + " | ";
            });
            
            library.vip.filter(function(book){
               if(book.isBorrowed){
                   return true;
               }else{
                   return false;
               }
            }).forEach(function(book){
                borrowed += book.title  + " | ";
            });
            
            document.getElementById("vipFreeLabel").innerHTML = free;
            document.getElementById("vipBorrowedLabel").innerHTML = borrowed;
        }
        
    </script>
    
    
    <script type="text/javascript">
        
        document.getElementById("addStandardBookBtn").addEventListener("click", function() { 
            var title = document.getElementById("titleInput").value;
            addStandardBook(title);
            printStandards();
            printVip();
        });
        document.getElementById("addVipBookBtn").addEventListener("click", function() { 
            var title = document.getElementById("titleInput").value;
            addVipBook(title);
            printStandards();
            printVip();
        });
        document.getElementById("borrowStandardBtn").addEventListener("click", function() { 
            var title = document.getElementById("titleInput").value;
            borrowStandardBook(title);
            printStandards();
            printVip();
        });
        document.getElementById("borrowVipBtn").addEventListener("click", function() { 
            var title = document.getElementById("titleInput").value;
            borrowVipBook(title);
            printStandards();
            printVip();
        });

    </script>
    
</body>
</html>  